import{g as i,u as m}from"./utils.eqLv3jM6.js";import{b as u}from"./url-utils.CYRnBsRd.js";const L=i(new URL(window.location.href)),r=m(L),n=document.getElementById("usernameModal"),f=document.getElementById("closeModalBtn"),h=document.getElementById("usernameForm"),s=document.getElementById("usernameInput"),t=document.getElementById("errorMessage");function g(){n?.classList.remove("hidden"),n?.classList.add("flex"),s?.focus()}function d(){n?.classList.add("hidden"),n?.classList.remove("flex"),s.value="",t?.classList.add("hidden")}function a(e){t&&(t.textContent=e,t.classList.remove("hidden"))}function E(){t?.classList.add("hidden")}window.addEventListener("openUsernameModal",g);f?.addEventListener("click",d);n?.addEventListener("click",e=>{e.target===n&&d()});h?.addEventListener("submit",e=>{e.preventDefault(),E();const o=s.value.trim().toLowerCase();if(!o){a(r("modal.errorEmpty"));return}if(o.length<3){a(r("modal.errorTooShort"));return}const c=i(new URL(window.location.href)),l=u("/user",c,`?u=${encodeURIComponent(o)}`);window.location.href=l});document.addEventListener("keydown",e=>{e.key==="Escape"&&!n?.classList.contains("hidden")&&d()});
